<!-- Custom head extensions for language selector -->
<script>
// Inject language selector when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  // Create language selector HTML
  const selectorHTML = `
    <!-- Selector de idioma -->
    <div class="language-selector">
      <button class="btn btn-outline-primary btn-sm dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fas fa-globe"></i>
        <span id="current-lang">
          {% if page.lang == 'en' %}English
          {% elsif page.lang == 'de' %}Deutsch
          {% elsif page.lang == 'fr' %}Français
          {% else %}Español{% endif %}
        </span>
      </button>
      <ul class="dropdown-menu" aria-labelledby="languageDropdown">
        <li><a class="dropdown-item" href="{{ page.url | replace: '/en/', '/' | replace: '/de/', '/' | replace: '/fr/', '/' }}"><i class="fas fa-flag" style="color: #c60b1e;"></i> Español</a></li>
        <li><a class="dropdown-item" href="/en{{ page.url }}"><i class="fas fa-flag" style="color: #012169;"></i> English</a></li>
        <li><a class="dropdown-item" href="/de{{ page.url }}"><i class="fas fa-flag" style="color: #ffce00;"></i> Deutsch</a></li>
        <li><a class="dropdown-item" href="/fr{{ page.url }}"><i class="fas fa-flag" style="color: #0055a4;"></i> Français</a></li>
      </ul>
    </div>
  `;

  // Inject into body
  document.body.insertAdjacentHTML('afterbegin', selectorHTML);
});
</script>

<style>
.language-selector {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1050;
  background: var(--main-bg, #ffffff);
  border: 1px solid var(--main-border-color, #e9ecef);
  border-radius: 0.375rem;
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}

.language-selector .btn {
  background: transparent;
  border: none;
  color: var(--text-color, #212529);
  font-size: 0.875rem;
  padding: 0.5rem 0.75rem;
}

.language-selector .btn:hover {
  background: var(--btn-border-color, #e9ecef);
}

.language-selector .dropdown-menu {
  min-width: 150px;
  border: 1px solid var(--main-border-color, #e9ecef);
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.language-selector .dropdown-item.active {
  background-color: var(--link-color, #0d6efd);
  color: white;
}

.language-selector .dropdown-item {
  padding: 0.5rem 1rem;
  color: var(--text-color, #212529);
}

.language-selector .dropdown-item:hover {
  background-color: var(--btn-border-color, #e9ecef);
}

.language-selector .dropdown-item i {
  margin-right: 0.5rem;
  width: 16px;
}

@media (max-width: 768px) {
  .language-selector {
    position: fixed;
    top: 10px;
    right: 10px;
    font-size: 0.8rem;
  }

  .language-selector .btn {
    padding: 0.375rem 0.5rem;
  }
}

/* Dark mode support for Chirpy theme */
[data-bs-theme="dark"] .language-selector {
  background: var(--main-bg);
  border-color: var(--main-border-color);
}

[data-bs-theme="dark"] .language-selector .btn {
  color: var(--text-color);
}

[data-bs-theme="dark"] .language-selector .dropdown-menu {
  background: var(--main-bg);
  border-color: var(--main-border-color);
}

[data-bs-theme="dark"] .language-selector .dropdown-item {
  color: var(--text-color);
}
</style>